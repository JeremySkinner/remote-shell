# Remote profile utilities

Helpful utilities for working with remote servers over ssh where multiple users share the same username. 

# Getting started

Install with by running the following command in your terminal on the remote server:

```
source <(curl -s https://raw.githubusercontent.com/JeremySkinner/remote-shell/master/install.sh)
```

The installer will install to ~/.remote-shell

The installer will prompt you for your unique name and create a bashrc file for you. For example, if you enter the name "jeremy" when prompted, the installer will create the file ~/.bashrc_jeremy 

By default, this will load the following files:
- ~/.remote-shell/.bashrc_common
- ~/.remote-shell/.bashrc_[name] (eg .bashrc_jeremy)

The "Common" bashrc (`~/.remote-shell/.bashrc_common`) is shared by all users and loads in the git prompt scripts.

The file `~/.remote-shell/.bashrc_[name]` is your own bashrc that is common to all machines. When you edit it, you should check it back in and push it to this repo.

The file `~/.bashrc_[name]` is your own bashrc that is unique to this login/server.

You will also be prompted to enter your (static) IP address. If you enter this, a check will be added to the regular `~/.bashrc` so that if you're connecting from the specified IP, your private bashrc will be automatically sourced.

# What's included

- Git config injection
- Git tab expansion
- Git prompt

# Git config injection

Git config injection allows you to run your own gitconfig file that is unique to your ssh session, which can then be used set up aliases and author information that is not shared with other people logging into the server as the same user. 

This is done by wrapping the `git` command in a function that injects custom config elements into the ~/.gitconfig file before the command is executed, and deletes them again after the command has been executed. 

To add your customizations, modify the `~/.gitconfig_[name]` file that is generated by the installer. It will also inject a file file with the same name inside the `~/.remote-shell` directory (eg `~/.remote-shell/.gitconfig_jeremy`) which doesn't exist by default, but if you create it and commit it then it'll be available to all servers.

# Git Prompt

The git prompt displays git information prompt information in your prompt: 

<img width="1004" alt="screen shot 2018-05-31 at 18 10 39" src="https://user-images.githubusercontent.com/90130/40796788-1df3980e-64fe-11e8-8aca-cb5ba83c40ef.png"> 

This is done by the [phpish-git](https://github.com/jeremyskinner/phpish-git) project, which is a PHP-based port of [posh-git](https://github.com/dahlbyk/posh-git).

A list of what all the symbols mean is available [on the project page](https://github.com/JeremySkinner/phpish-git).

The prompt is fully customizable using a huge number of settings. For example, I like to use a verbose multi-line prompt:

<img width="1022" alt="screen shot 2018-05-31 at 18 14 46" src="https://user-images.githubusercontent.com/90130/40796931-84da0a26-64fe-11e8-9953-9e6f9f51fc00.png">

More details on how to customize this can be found on the [phpish-git](https://github.com/JeremySkinner/phpish-git) project page.


# Git tab expansion

Also part of the phpish-git project, tab expansion is available for git commands. 

# Built-in drush and drupal console launchers

The `.bashrc_common` defines the `drush` and `drupal` functions. These act as wrappers for the `drush` and `drupal` executables within a Drupal 8 project's `/vendor/` directory. If you are in a subdirectory of the project, invoking `drush` or `drupal` will correctly locate the appropriate executable within the directory structure and execute it.
